# Realm Manager

> 一款更快捷、更智能的 Realm 转发规则管理脚本。

这款脚本提供了全中文的交互式菜单，旨在简化 `realm` 的安装、配置和日常管理流程，让所有操作都一目了然。

## 🚀 一键使用

在您的服务器上执行以下命令，即可启动管理脚本。

#### 标准命令
```bash
bash <(curl -sL https://raw.githubusercontent.com/AiLi1337/realm_manager/main/realm_manager.sh)
```

✨ 功能特性

菜单化管理：通过交互式菜单完成所有操作，无需记忆复杂命令。
一键安装/卸载：全自动处理 realm 的安装、配置和卸载。
智能添加规则：自动检测 IPv6 地址并添加括号。
表格化规则列表：清晰地展示所有转发规则，并带有序号。
按序号批量删除：可一次选择多个序号，安全、高效地删除多条规则。
服务管理：快捷地启/停/重启服务、查看状态和设置开机自启。
健壮可靠：代码经过多轮迭代和BUG修复，全面提升了稳定性、容错能力和错误提示。


🖥️ 界面预览

清晰的表格化规则列表，让您的转发配置一目了然。
```
当前存在的转发规则如下:
╔══════╤════════════════════════╤══════════════════════════════════╗
║ 序号 │ 本地监听               │ 远程目标                         ║
╠══════╧════════════════════════╧══════════════════════════════════╣
║ 1    │ 0.0.0.0:54000          │ 1.1.1.1:443                      ║
║ 2    │ 0.0.0.0:54001          │ [2a01::1]:8443                   ║
║ 3    │ 0.0.0.0:54002          │ my.domain.com:12345              ║
╚══════════════════════════════════════════════════════════════════╝
```

📜 更新日志

v2.0 & v2.1: 全面提升健壮性 (最终稳定版)

这是当前最稳定、最完善的版本。在修复了所有已知BUG后，我们对代码进行了严格的审查和重构，全面提升了脚本的“防御能力”。

核心功能：代码健壮性与容错能力的全面增强。

亮点：

更严格的输入验证：增加了对端口号 1-65535 有效范围的检查。
更健壮的规则处理：重构了规则的读取和生成逻辑，使其在处理被意外修改过的配置文件时更加安全。
更明确的错误反馈：当服务启动失败时，脚本会自动打印最新的错误日志，帮助用户快速定位问题。
解决了所有已知的缓存问题：通过引入 git 工作流或“本地文件创建”法，彻底解决了因网络缓存导致无法更新到最新版脚本的顽固问题。

v1.8 & v1.9: 关键BUG修复

这两个版本专注于解决在特定操作下会导致程序崩溃或信息错误的深层BUG，是脚本走向稳定性的关键。

核心功能：提升脚本的逻辑严谨性。

亮点：

修复了“删除摘要”BUG (v1.9)：解决了在删除规则时，确认信息错误地显示了其它规则内容的BUG，确保了信息反馈的准确性。
修复了“清空规则”BUG (v1.8)：解决了当最后一条规则被删除后，配置文件因缺少 [[endpoints]] 部分而导致 realm 服务无法启动的严重问题。

v1.6 & v1.7: 交互简化与调整

根据您的实际使用偏好，我们对界面和功能进行了精简，使其更符合您的操作习惯。

核心功能：界面与交互的极简化。

亮点：

v1.7 版本取消了“添加规则”时自动推荐端口的功能，将选择权完全交还给用户。

v1.6 版本根据您的要求，移除了所有复杂的边框和不必要的颜色，只保留了服务状态的颜色，形成了最终的极简风格菜单。

v1.5: 解决环境兼容性与UI美化

此版本主要为了解决脚本在特定终端上出现的显示问题，是提升用户体验的重要一步。

核心功能：界面对齐与美化。

亮点：

针对中文环境，通过精细调整每一行的格式，彻底修复了因字符宽度问题导致的菜单边框错乱。
引入了全新的配色方案，并实现了服务状态的彩色显示（运行中/绿色，已停止/红色，未安装/黄色）。
提供了“无颜色”版本作为备用方案。

v1.4: 功能里程碑

这是我们功能开发的一个重要基础版本，奠定了现代化的交互方式。

核心功能：实现了按序号显示和删除规则的功能。

亮点：

全新的规则显示面板，以表格形式清晰展示所有规则。
首次支持了批量删除（例如输入 1 3 来同时删除多条规则），大大提升了管理效率。